{"ast":null,"code":"import $ from \"jquery\";\nexport function createData(item, props, setModal) {\n  let data = [];\n\n  for (let i = 0; i < props.glucoseRanges.length; i++) {\n    let dataObj = {\n      range: props.glucoseRanges[i].slice(0, 2),\n      data: [],\n      color: props.glucoseRanges[i][2],\n      series: {\n        lines: {\n          show: true,\n          fill: true,\n          fillColor: {\n            colors: [{\n              opacity: 1\n            }, {\n              opacity: 1\n            }]\n          }\n        }\n      }\n    };\n    data.push(dataObj);\n  }\n\n  for (let i0 = 0; i0 < item.result.length; i0++) {\n    for (let i1 = 0; i1 < data.length; i1++) {\n      let gL = item.result[i0].glucose_level;\n\n      if (gL >= data[i1].range[0] && gL <= data[i1].range[1]) {\n        console.log(item.result[i0].result_dt_tm);\n        let test = \"06/06/2021 22:14:00\";\n        let hour = parseInt(test.slice(11, 13));\n        let min = parseInt(test.slice(14, 16));\n        let minDec = min / 60;\n        let time = hour + minDec;\n        console.log(time);\n        data[i1].data.push([time, gL]);\n      }\n    }\n  }\n\n  let TandGL = [];\n\n  for (let i = 0; i < data.length; i++) {\n    if (data[i].data.length != undefined) {\n      data[i].data.forEach(arr => {\n        TandGL.push(arr);\n      });\n    }\n  }\n\n  TandGL.sort((a, b) => {\n    return a[0] - b[0];\n  });\n  let thresholds = [];\n\n  for (let i = 0; i < props.glucoseRanges.length; i++) {\n    thresholds.push(props.glucoseRanges[i][0]);\n    thresholds.push(props.glucoseRanges[i][1]);\n  }\n\n  let seriesArr = [];\n\n  for (let i0 = 0; i0 < TandGL.length - 1; i0++) {\n    if (TandGL.length > 0 && TandGL[i0][1] < TandGL[i0 + 1][1]) {\n      let thresholdPasses = [];\n\n      for (let i1 = 0; i1 < thresholds.length; i1++) {\n        if (TandGL[i0][1] < thresholds[i1] && TandGL[i0 + 1][1] > thresholds[i1]) {\n          thresholdPasses.push(thresholds[i1]);\n        }\n      }\n\n      if (seriesArr.length > 0) {\n        seriesArr.push([seriesArr[seriesArr.length - 1][1], TandGL[i0]]);\n      }\n\n      let currentSeries = [TandGL[i0]];\n      let totalTimeGap = TandGL[i0 + 1][0] - TandGL[i0][0];\n      let totalPointsGap = TandGL[i0 + 1][1] - TandGL[i0][1];\n\n      for (let i2 = 0; i2 < thresholdPasses.length; i2++) {\n        let pointsDif = thresholdPasses[i2] - TandGL[i0][1];\n        let percOfTot = pointsDif / totalPointsGap;\n        let timeToAdd = percOfTot * totalTimeGap;\n        let time = timeToAdd + TandGL[i0][0];\n        currentSeries.push([time, thresholdPasses[i2]]);\n\n        if (i2 == thresholdPasses.length - 1) {\n          currentSeries.push(TandGL[i0 + 1]);\n        }\n\n        if (currentSeries.length == 2) {\n          seriesArr.push(currentSeries);\n          currentSeries = [];\n        }\n      }\n\n      if (thresholdPasses.length == 0) {\n        currentSeries.push(TandGL[i0 + 1]);\n        seriesArr.push(currentSeries);\n      }\n    } else if (TandGL.length > 0 && TandGL[i0][1] > TandGL[i0 + 1][1]) {\n      let thresholdPasses = [];\n\n      for (let i1 = 0; i1 < thresholds.length; i1++) {\n        if (TandGL[i0 + 1][1] < thresholds[i1] && TandGL[i0][1] > thresholds[i1]) {\n          thresholdPasses.push(thresholds[i1]);\n        }\n      }\n\n      if (seriesArr.length > 0) {\n        seriesArr.push([seriesArr[seriesArr.length - 1][1], TandGL[i0]]);\n      }\n\n      thresholdPasses.reverse();\n      let currentSeries = [TandGL[i0]];\n      let totalTimeGap = TandGL[i0][0] - TandGL[i0 + 1][0];\n      let totalPointsGap = TandGL[i0 + 1][1] - TandGL[i0][1];\n\n      for (let i2 = 0; i2 < thresholdPasses.length; i2++) {\n        let pointsDif = TandGL[i0][1] - thresholdPasses[i2];\n        let percOfTot = pointsDif / totalPointsGap;\n        let timeToAdd = percOfTot * totalTimeGap;\n        let time = timeToAdd + TandGL[i0][0];\n        currentSeries.push([time, thresholdPasses[i2]]);\n\n        if (i2 == thresholdPasses.length - 1) {\n          currentSeries.push(TandGL[i0 + 1]);\n          currentSeries.push(TandGL[i0 + 1]);\n        }\n\n        if (currentSeries.length == 2) {\n          seriesArr.push(currentSeries);\n          currentSeries = [];\n        }\n      }\n\n      if (thresholdPasses.length == 0) {\n        currentSeries.push(TandGL[i0 + 1]);\n        seriesArr.push(currentSeries);\n      }\n    }\n  }\n\n  for (let i = 0; i < seriesArr.length; i++) {\n    if (seriesArr[i][0] === seriesArr[i][1]) {\n      seriesArr.splice(i, 1);\n    }\n  }\n\n  let dataPreSend = [];\n\n  for (let i0 = 0; i0 < seriesArr.length; i0++) {\n    let avg = (seriesArr[i0][0][1] + seriesArr[i0][1][1]) / 2;\n    let color;\n\n    for (let i1 = 0; i1 < props.glucoseRanges.length; i1++) {\n      if (avg > props.glucoseRanges[i1][0] && avg < props.glucoseRanges[i1][1]) {\n        color = props.glucoseRanges[i1][2];\n        break;\n      }\n    }\n\n    dataPreSend.push({\n      data: seriesArr[i0],\n      color: color\n    });\n  }\n\n  let dataToSend = [];\n\n  for (let i0 = 0; i0 < dataPreSend.length; i0++) {\n    let firstT = dataPreSend[i0].data[0][0];\n    let firstGl = dataPreSend[i0].data[0][1];\n    let color = dataPreSend[i0].color;\n    let dataToPush = [];\n    let fAndOrL = \"0\";\n\n    for (let i1 = 0; i1 < TandGL.length; i1++) {\n      let TandGL0 = TandGL[i1][0];\n      let TandGL1 = TandGL[i1][1];\n\n      if (firstT == TandGL0 && firstGl == TandGL1) {\n        dataToPush.push({\n          data: [[firstT, firstGl]],\n          color: color,\n          points: {\n            show: true,\n            radius: 7\n          }\n        });\n        fAndOrL = \"1\";\n      }\n\n      let secondT = dataPreSend[i0].data[1][0];\n      let secondGl = dataPreSend[i0].data[1][1];\n\n      if (secondT == TandGL0 && secondGl == TandGL1) {\n        dataToPush.push({\n          data: [[secondT, secondGl]],\n          color: color,\n          points: {\n            show: true,\n            radius: 7\n          }\n        });\n\n        if (fAndOrL == \"0\") {\n          fAndOrL = \"2\";\n        } else {\n          fAndOrL = \"12\";\n        }\n      }\n    }\n\n    if (fAndOrL == \"0\") {\n      dataToSend.push(dataPreSend[i0]);\n    } else if (fAndOrL == \"1\") {\n      dataToSend.push(dataToPush[0]);\n      dataToSend.push(dataPreSend[i0]);\n    } else if (fAndOrL == \"2\") {\n      dataToSend.push(dataPreSend[i0]);\n      dataToSend.push(dataToPush[0]);\n    } else {\n      dataToSend.push(dataToPush[0]);\n      dataToSend.push(dataPreSend[i0]);\n      dataToSend.push(dataToPush[1]);\n    }\n  }\n\n  for (let i0 = 0; i0 < dataToSend.length - 1; i0++) {\n    let d0 = dataToSend[i0].data;\n    let d1 = dataToSend[i0 + 1].data;\n\n    if (d0.length == 1 && d1.length == 1) {\n      dataToSend.splice(i0, 1);\n    } else {\n      if (d0.length > 1 && d0[1][0] + .01 < d1[0][0]) {\n        for (let i1 = 0; i1 < TandGL.length; i1++) {\n          if (d0[1][0] === TandGL[i1][0] && d0[1][1] === TandGL[i1][1]) {\n            d1[0][0] = d0[1][0];\n          } else if (d1[0][0] === TandGL[i1][0] && d1[0][1] === TandGL[i1][1]) {\n            d0[1][0] = d1[0][0];\n          } else {\n            let num = (d1[0][0] - d0[1][0]) / 2;\n            d0[1][0] = d0[1][0] + num;\n            d1[0][0] = d1[0][0] - num;\n          }\n        }\n      }\n    }\n  }\n\n  let lastDTS = dataToSend[dataToSend.length - 1];\n  let lastDTSl = lastDTS.data[lastDTS.data.length - 1];\n  let lastTandGL = TandGL[TandGL.length - 1];\n\n  if (lastDTSl[0] != lastTandGL[0] || lastDTSl[1] != lastTandGL[1]) {\n    dataToSend.push({\n      data: [lastDTSl, lastTandGL],\n      color: lastDTS.color\n    });\n    dataToSend.push({\n      data: [lastTandGL],\n      color: lastDTS.color,\n      points: {\n        show: true,\n        radius: 7\n      }\n    });\n  }\n\n  console.log(dataToSend);\n  let item0 = item;\n  $(`#${item0.date.replaceAll('/', '')}`).off('plotclick').on('plotclick', function (event, pos, item) {\n    event.stopPropagation();\n\n    if (item != null && item.datapoint) {\n      for (let i = 0; i < item0.result.length; i++) {\n        let result = item0.result[i];\n        let gL = result.glucose_level;\n        let hour = parseInt(item.result[i].result_dt_tm.slice(11, 13));\n        let min = parseInt(item.result[i].result_dt_tm.slice(14, 16));\n        let minDec = min / 60;\n        let time = hour + minDec;\n        console.log(time);\n\n        if (item.datapoint[0] == time && item.datapoint[1] == gL) {\n          setModal({\n            open: true,\n            data: {\n              glucoseLevel: gL + result.glucose_level_unit,\n              resultDate: result.result_dt_tm,\n              source: result.source,\n              resultId: result.result_id\n            }\n          });\n          break;\n        }\n      }\n    }\n  });\n  return dataToSend;\n}","map":{"version":3,"sources":["/Users/Dmolina5/Desktop/T4Med-Task/t4med-task/src/components/Graph/GraphUtils.js"],"names":["$","createData","item","props","setModal","data","i","glucoseRanges","length","dataObj","range","slice","color","series","lines","show","fill","fillColor","colors","opacity","push","i0","result","i1","gL","glucose_level","console","log","result_dt_tm","test","hour","parseInt","min","minDec","time","TandGL","undefined","forEach","arr","sort","a","b","thresholds","seriesArr","thresholdPasses","currentSeries","totalTimeGap","totalPointsGap","i2","pointsDif","percOfTot","timeToAdd","reverse","splice","dataPreSend","avg","dataToSend","firstT","firstGl","dataToPush","fAndOrL","TandGL0","TandGL1","points","radius","secondT","secondGl","d0","d1","num","lastDTS","lastDTSl","lastTandGL","item0","date","replaceAll","off","on","event","pos","stopPropagation","datapoint","open","glucoseLevel","glucose_level_unit","resultDate","source","resultId","result_id"],"mappings":"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","sourcesContent":["import $ from \"jquery\";\n\nexport function createData(item, props, setModal) {\n    let data = []\n\n    for (let i = 0; i < props.glucoseRanges.length; i++) {\n        let dataObj = {\n            range: props.glucoseRanges[i].slice(0,2),\n            data: [],\n            color: props.glucoseRanges[i][2],\n            series: {\n                lines: { \n                    show: true, \n                    fill: true, \n                    fillColor: {\n                        colors: [{ opacity: 1 }, { opacity: 1 } ]\n                    }\n                }\n            }\n        }\n        data.push(dataObj)\n    }\n\n    for (let i0 = 0; i0 < item.result.length; i0++) {\n        for (let i1 = 0; i1 < data.length; i1++) {\n            let gL = item.result[i0].glucose_level\n            if (gL >= data[i1].range[0] && gL <= data[i1].range[1]) {\n                console.log(item.result[i0].result_dt_tm)\n                let test = \"06/06/2021 22:14:00\"\n                let hour = parseInt(test.slice(11,13))\n                let min = parseInt(test.slice(14,16))\n                let minDec = min/60\n                let time = hour + minDec\n                console.log(time)\n                data[i1].data.push([time, gL])\n            }\n        }\n    }\n\n    let TandGL = []\n\n    for (let i = 0; i< data.length; i++) {\n        if (data[i].data.length != undefined) {\n            data[i].data.forEach((arr) => {\n                TandGL.push(arr)\n            })\n        }\n    }\n\n    TandGL.sort((a, b) => {\n        return a[0] - b[0]\n    })\n\n    let thresholds = []\n\n    for (let i = 0; i < props.glucoseRanges.length; i++) {\n        thresholds.push(props.glucoseRanges[i][0])\n        thresholds.push(props.glucoseRanges[i][1])\n    }\n\n    let seriesArr = []\n\n    for (let i0 = 0; i0 < TandGL.length - 1; i0++) {\n        if (TandGL.length > 0 && TandGL[i0][1] < TandGL[i0+1][1]) {\n            let thresholdPasses = []\n            for (let i1 = 0; i1 < thresholds.length; i1++) {\n                if (TandGL[i0][1] < thresholds[i1] && \n                    TandGL[i0+1][1] > thresholds[i1]) {\n                    thresholdPasses.push(thresholds[i1])\n                }\n            }\n            if (seriesArr.length > 0) {\n                seriesArr.push([\n                    seriesArr[seriesArr.length-1][1],\n                    TandGL[i0]\n                ])\n            }\n            let currentSeries = [TandGL[i0]]\n            let totalTimeGap = TandGL[i0+1][0] - TandGL[i0][0]\n            let totalPointsGap = TandGL[i0+1][1] - TandGL[i0][1]\n            for (let i2 = 0; i2 < thresholdPasses.length; i2++) {\n                let pointsDif = thresholdPasses[i2] - TandGL[i0][1]\n                let percOfTot = pointsDif/totalPointsGap\n                let timeToAdd = percOfTot * totalTimeGap \n                let time = timeToAdd + TandGL[i0][0]\n                currentSeries.push([time, thresholdPasses[i2]])\n                if (i2 == thresholdPasses.length - 1 ) {\n                    currentSeries.push(TandGL[i0+1])\n                }\n                if (currentSeries.length == 2) {\n                    seriesArr.push(currentSeries)\n                    currentSeries = []\n                }\n            }\n            if (thresholdPasses.length == 0) {\n                currentSeries.push(TandGL[i0+1])\n                seriesArr.push(currentSeries)\n            }\n        } else if (TandGL.length > 0 && TandGL[i0][1] > TandGL[i0+1][1]) {\n            let thresholdPasses = []\n            for (let i1 = 0; i1 < thresholds.length; i1++) {\n                if (TandGL[i0+1][1] < thresholds[i1] && \n                    TandGL[i0][1] > thresholds[i1]) {\n                    thresholdPasses.push(thresholds[i1])\n                }\n            }\n            if (seriesArr.length > 0) {\n                seriesArr.push([\n                    seriesArr[seriesArr.length-1][1],\n                    TandGL[i0]\n                ])\n            }\n            thresholdPasses.reverse()\n            let currentSeries = [TandGL[i0]]\n            let totalTimeGap = TandGL[i0][0] - TandGL[i0+1][0]\n            let totalPointsGap = TandGL[i0+1][1] - TandGL[i0][1]\n            for (let i2 = 0; i2 < thresholdPasses.length; i2++) {\n                let pointsDif = TandGL[i0][1] - thresholdPasses[i2]\n                let percOfTot = pointsDif/totalPointsGap\n                let timeToAdd = percOfTot * totalTimeGap \n                let time = timeToAdd + TandGL[i0][0]\n                currentSeries.push([time, thresholdPasses[i2]])\n                if (i2 == thresholdPasses.length - 1 ) {\n                    currentSeries.push(TandGL[i0+1])\n                    currentSeries.push(TandGL[i0+1])\n                }\n                if (currentSeries.length == 2) {\n                    seriesArr.push(currentSeries)\n                    currentSeries = []\n                }\n            }\n            if (thresholdPasses.length == 0) {\n                currentSeries.push(TandGL[i0+1])\n                seriesArr.push(currentSeries)\n            }\n        }\n    }\n\n    for (let i = 0; i < seriesArr.length; i++) {\n        if (seriesArr[i][0] === seriesArr[i][1]) {\n            seriesArr.splice(i, 1)\n        }\n    }\n\n    let dataPreSend = []\n\n    for (let i0 = 0; i0 < seriesArr.length; i0++) {\n        let avg = (seriesArr[i0][0][1] + seriesArr[i0][1][1])/2\n        let color\n        for (let i1 = 0; i1 < props.glucoseRanges.length; i1++) {\n            if (avg > props.glucoseRanges[i1][0] &&\n                avg < props.glucoseRanges[i1][1]) {\n                color = props.glucoseRanges[i1][2]\n                break\n            }\n        }\n        dataPreSend.push({\n            data: seriesArr[i0],\n            color: color\n        })\n    }\n\n    let dataToSend = []\n\n    for (let i0 = 0; i0 < dataPreSend.length; i0++) {\n        let firstT = dataPreSend[i0].data[0][0]\n        let firstGl = dataPreSend[i0].data[0][1]\n        let color = dataPreSend[i0].color\n        let dataToPush = []\n        let fAndOrL = \"0\"\n        for (let i1 = 0; i1 < TandGL.length; i1++) {\n            let TandGL0 = TandGL[i1][0]\n            let TandGL1 = TandGL[i1][1]\n            if (firstT == TandGL0 && firstGl == TandGL1) {\n                dataToPush.push({\n                    data: [[firstT, firstGl]],\n                    color: color,\n                    points: {show: true, radius: 7}\n                })\n                fAndOrL = \"1\"\n            }\n            let secondT = dataPreSend[i0].data[1][0]\n            let secondGl = dataPreSend[i0].data[1][1]\n            if (secondT == TandGL0 && secondGl == TandGL1) {\n                dataToPush.push({\n                    data: [[secondT, secondGl]],\n                    color: color,\n                    points: {show: true, radius: 7}\n                })\n                if (fAndOrL == \"0\") {\n                    fAndOrL = \"2\"\n                } else {\n                    fAndOrL = \"12\"\n                }\n            }\n        }\n        if (fAndOrL == \"0\") {\n            dataToSend.push(dataPreSend[i0])\n        } else if (fAndOrL == \"1\") {\n            dataToSend.push(dataToPush[0])\n            dataToSend.push(dataPreSend[i0])\n        } else if (fAndOrL == \"2\") {\n            dataToSend.push(dataPreSend[i0])\n            dataToSend.push(dataToPush[0])\n        } else {\n            dataToSend.push(dataToPush[0])\n            dataToSend.push(dataPreSend[i0])\n            dataToSend.push(dataToPush[1])\n        }\n    }\n\n    for (let i0 = 0; i0 < dataToSend.length - 1; i0++) {\n        let d0 = dataToSend[i0].data\n        let d1 = dataToSend[i0+1].data\n        if (d0.length == 1 && d1.length == 1) {\n            dataToSend.splice(i0, 1)\n        } else {\n            if (d0.length > 1 && d0[1][0] + .01 < d1[0][0]) {\n                for (let i1 = 0; i1 < TandGL.length; i1++) {\n                    if (d0[1][0] === TandGL[i1][0] && d0[1][1] === TandGL[i1][1]) {\n                        d1[0][0] = d0[1][0]\n                    } else if (d1[0][0] === TandGL[i1][0] && d1[0][1] === TandGL[i1][1]) {\n                        d0[1][0] = d1[0][0]\n                    } else {\n                        let num = ((d1[0][0] - d0[1][0]) / 2)\n                        d0[1][0] = d0[1][0] + num\n                        d1[0][0] = d1[0][0] - num\n                    }\n                }\n            }\n        }\n    }\n\n    let lastDTS = dataToSend[dataToSend.length-1]\n    let lastDTSl = lastDTS.data[lastDTS.data.length-1]\n    let lastTandGL = TandGL[TandGL.length-1]\n    if (lastDTSl[0] != lastTandGL[0] || lastDTSl[1] != lastTandGL[1]) {\n        dataToSend.push({\n            data: [lastDTSl, lastTandGL],\n            color: lastDTS.color\n        })\n        dataToSend.push({\n            data: [lastTandGL],\n            color: lastDTS.color,\n            points: {show: true, radius: 7}\n        })\n    }\n\n    console.log(dataToSend)\n\n    let item0 = item\n\n    $(`#${item0.date.replaceAll('/', '')}`).off('plotclick')\n        .on('plotclick', function (event, pos, item) {\n        event.stopPropagation()\n        if (item != null && item.datapoint) {\n            for (let i = 0; i < item0.result.length; i++) {\n                let result = item0.result[i]\n                let gL = result.glucose_level\n                let hour = parseInt(item.result[i].result_dt_tm.slice(11,13))\n                let min = parseInt(item.result[i].result_dt_tm.slice(14,16))\n                let minDec = min/60\n                let time = hour + minDec\n                console.log(time)\n                if (item.datapoint[0] == time && item.datapoint[1] == gL) {\n                    setModal({\n                        open: true,\n                        data: {\n                            glucoseLevel: gL + result.glucose_level_unit,\n                            resultDate: result.result_dt_tm,\n                            source: result.source,\n                            resultId: result.result_id\n                        }\n                    })\n                    break\n                }\n            }\n        }\n    });\n\n    return dataToSend\n}"]},"metadata":{},"sourceType":"module"}